## Mysql InnoDB和MyISMA 的区别

#### 1. InnoDB和MyISAM的区别

主要的区别： 

1. **数据的存储结构不一样**

+ **InnoDB**：
  + 数据和索引存储在同一个文件中（`.ibd` 文件）。支持聚簇索引（Clustered Index），索引和值放在一起（二级索引是聚簇索引吗）。
+ **MyISAM**：
  + 数据（`.MYD` 文件）和索引（`.MYI` 文件）分开存储。不支持聚簇索引。



tips：数据的存储结构不一样，导致查询效率也不一样，**首先**，innoDB数据和索引在一个文件中，文件更大查询的较慢，MyISAM只存储索引，所以相同索引下，MyISAM使用的存储空间更少（页更少）,查的页数就少，所以MyISAM查的比InnoDB快；**其次** 聚簇索引的存储方式，可能会发生回表（使用二级索引），而MyISAM不会发生回表，因为他的索引（叶子节点存储的是指向这个数据的物理地址，所以可以一下获得全部的信息，而不用回表）

**2. 锁的级别不一样**

* InnoDB

  * 支持行锁，锁的粒度较低，所以并发能力高，同时行锁的性能开销更大。

* MyISAM

  * 支持表锁，锁的粒度较高，所以锁发能力低。

  

tips：对一行数据修改，InnoDB会使用行锁，MyISAM会使用表锁，表锁的管理简单，只需要维护一个锁对象（整个表）行锁的管理复杂，需要为每一行维护锁信息。

**3. 事务支持**

* InnoDB支持事务
  * redo log (持久性)， MVCC 和 锁（隔离性）， undo log(原子性）， 以上三种特性加上外键构成一致性。
* MyISAM 不支持事务
  * 不支持事务，反而没有那么多性能消耗，所以时候读多写少的情况。

总结: 

​	以上特性总结，InnoDB 支持行锁，事务，（外键），索引和数据存放在一起（.idb文件）（可能会回表），能够承受更多的并发，并且发生错误有回顾机制，更加安全。

​	MyISAM,支持表锁，不支持事务，索引和数据单独存放（.myd和.myi）,查询效率更高，但是不够安全。

